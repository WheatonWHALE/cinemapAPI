<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>API Demo</title>
	<link rel="stylesheet" href="css/style.css">
</head>

<body>
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
	<script>
	$(document).ready(function(){
		$( "#getmovie" ).submit(function( event ) {
			console.log(event);
			event.preventDefault();

			var $form = $( this ),
		    m_title = $form.find( "input[name='title']" ).val(),
		    url = $form.attr( "action" );
		 
			// Send the data using post
			var getting = $.get( url, {title: m_title});

			// Put the results in a div
			getting.done(function( data ) {
				$( ".output" ).empty().append("<p>" + JSON.stringify(data) + "</p>");
			});
		});		


		$( "#getall" ).submit(function( event ) {
			console.log(event);
			event.preventDefault();

			var $form = $( this ),
		    url = $form.attr( "action" );
		 
			// Send the data using post
			var getting = $.get( url, {});

			// Put the results in a div
			getting.done(function( data ) {
				for (var i; i < data.length; i ++) {
					console.log(data[i]);
				};
				$( ".output" ).empty().append("<p>" + JSON.stringify(data) + "</p>");
			});
		});		


		$( "#addmovie" ).submit(function( event ) {
			console.log(event);
			event.preventDefault();

			var $form = $( this ),
		    m_title = $form.find( "input[name='title']" ).val(),
		    m_year = $form.find( "input[name='year']" ).val(),
		    m_box = $form.find( "input[name='box']" ).val(),
		    url = $form.attr( "action" );
		 
			// Send the data using post
			var posting = $.post( url, {title: m_title, year: m_year, box: m_box});

			// Put the results in a div
			posting.done(function( data ) {
				$( ".output" ).empty().append("<p>" + JSON.stringify(data) + "</p>");
			});
		});		


	});
	</script>

	<div class="container">
		<div class="head">
			CineMap
		</div>
		<div class="apiform">
			<form id="getall" action="/api/0.1/features/">
				<input type="submit" value="Get All Features"/> 
			</form>
			<br>
			<form id="getmovie" action="/api/0.1/testing/">
				<input type="text" name="title" size="100" maxlength="100" placeholder="Movie Title"/> 
				<input type="submit" value="Find Movie"/> 
			</form>
			<br>
			<form id="addmovie" action="/api/0.1/testing/">
				<input type="text" name="title" size="100" maxlength="100" placeholder="Movie Title"/> 
				<input type="text" name="year" size="100" maxlength="100" placeholder="Year"/> 
				<input type="text" name="box" size="100" maxlength="100" placeholder="Box Office Gross"/> 
				<input type="submit" value="Add Movie"/> 
			</form>

		</div>
		<div class="output">
		</div>
	</div>
</body>
</html>